var xt=Object.defineProperty;var kt=(a,e,s)=>e in a?xt(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s;var V=(a,e,s)=>kt(a,typeof e!="symbol"?e+"":e,s);import{d as Ge}from"./vendor_vuedraggable-2_hBeS4R.js";import{d as v,c as M,o as m,a as $,w as r,r as P,m as D,u as t,b as n,n as te,g as se,e as S,f as O,h as b,i as $t,j as H,v as Ct,k as Pt,l as Bt,p as St,q as B,t as E,s as ae,x as F,y as q,z as re,A as pe,F as oe,B as le,C as It,D as Mt,E as Dt,G as Fe,H as zt}from"./vendor_@vue-QuHMzCbT.js";import{C as X,a as me,d as De,t as jt,c as Vt,x as U,N as Et,j as Lt,I as K,H as Tt,K as Je,L as Ot,Q as Ft,e as Ht,b as At,f as Wt,z as Nt,X as qt,Z as Ut,U as Ye,J as Rt,g as Xt,S as Kt,_ as Zt,h as ue,i as Gt,k as Jt,O as Yt,l as Qe,m as Qt,p as es,n as ts,s as He,q as ss,E as et,o as tt,r as as,Y as os,u as st,v as ls,M as ns,w as rs,F as is,V as ds,y as us,A as cs,B as fs,D as ps,G as ms,W as gs,P as hs,R as vs,T as _s,$ as ys,a0 as bs,a1 as ws,a2 as xs,a3 as ks,a4 as $s,a5 as Cs,a6 as Ps,a7 as Bs,a8 as Ss,a9 as Is,aa as Ms,ab as Ds,ac as zs,ad as js,ae as Vs,af as Es}from"./vendor-nNgrRyqm.js";import{a as $e,m as Ae,b as We,r as Ls,n as fe,c as Ts,s as Os,d as Fs,e as Hs}from"./vendor_mathjs-Cd8SWZfB.js";import"./index-CONDUKeV.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const u of d.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function s(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(l){if(l.ep)return;l.ep=!0;const d=s(l);fetch(l.href,d)}})();var $o=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Co(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function Po(a){if(a.__esModule)return a;var e=a.default;if(typeof e=="function"){var s=function o(){return this instanceof o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(a).forEach(function(o){var l=Object.getOwnPropertyDescriptor(a,o);Object.defineProperty(s,o,l.get?l:{enumerable:!0,get:function(){return a[o]}})}),s}class ge{constructor(e,s,o,l,d=null){V(this,"id");V(this,"label");V(this,"pose");V(this,"position");V(this,"color");V(this,"show");V(this,"edit");this.id=e,this.label=s,this.pose=o,this.position=l,this.edit=!1,this.color=d||X.rgb([Math.floor(Math.random()*256),Math.floor(Math.random()*256),Math.floor(Math.random()*256)]),this.show=!0}equals(e){return e==null?!1:typeof e=="string"?this.id==e:this.id==e.id}toJSON(){return{id:this.id,label:this.label,color:this.color.hex(),pose:this.pose,position:this.position}}getId(){return this.id}getLabel(){return this.label}setLabel(e){this.label=e}getColorHEX(){return this.color.hex()}setColorHEX(e){this.color=X(e)}setColorRGB(e){e.length<3||(this.color=X.rgb(e[0],e[1],e[2]))}setPose(e,s){this.pose={marker:s,image:e}}getPose(){return this.pose}setPosition(e){this.position=e}getPosition(){return this.position}getEdit(){return this.edit}setEdit(e){this.edit=e}}class he{constructor(e,s=null,o=null){V(this,"label");V(this,"landmarks");V(this,"color");V(this,"edit_label");V(this,"edit_distance");V(this,"show");this.label=e,this.landmarks=s||new Array,this.edit_label=!1,this.edit_distance=!1,this.show=!0,this.color=o||X.rgb([Math.floor(Math.random()*256),Math.floor(Math.random()*256),Math.floor(Math.random()*256)])}get distance(){if(this.landmarks.length<2)return;let e=new Array;for(let s=1;s<this.landmarks.length;s++)e.push([$e(this.landmarks[s].position.x-this.landmarks[s-1].position.x),$e(this.landmarks[s].position.y-this.landmarks[s-1].position.y),$e(this.landmarks[s].position.z-this.landmarks[s-1].position.z)]);return console.log(e.length),e}in(e){return this.landmarks.some(s=>s.equals(e))}reset(){this.landmarks=new Array}remove(e){this.landmarks=this.landmarks.filter(s=>!s.equals(e))}getColorHEX(){return this.color.hex()}setColorHEX(e){this.color=X(e)}setColorRGB(e){e.length<3||(this.color=X.rgb(e[0],e[1],e[2]))}toJSON(){return{label:this.label,color:this.color.hex(),landmarks:this.landmarks.map(e=>e.toJSON())}}}class As{constructor(e){V(this,"provider");this.provider=e}computeLandmarkPosition(e,s){return this.provider.computeLandmarkPosition(e,s).then(o=>o.data)}async getImages(e){return this.provider.getImages(e).then(s=>{let o=s.data;return o.individualImages=new Map(Object.entries(o.individualImages)),o})}getFullImage(e,s){return this.provider.getFullImage(e,s)}getThumbnail(e,s){return this.provider.getThumbnail(e,s)}}class Ws{constructor(e){V(this,"server");this.server=e}async getImages(e){const s=this.server+"/"+e+"/images";return me.get(s)}getFullImage(e,s){return this.server+"/"+e+"/"+s+"/full-image"}getThumbnail(e,s){return this.server+"/"+e+"/"+s+"/thumbnail"}async computeLandmarkPosition(e,s){const o=this.server+"/"+e+"/"+s.image.name+"/position?x="+s.marker.x+"&y="+s.marker.y;return me.get(o)}}class Ns{constructor(e){V(this,"server");this.server=e}async getImages(e){const s=this.server+"/stackoptica/"+e+"/images";return me.get(s)}getFullImage(e,s){return this.server+"/stackoptica/"+s+"/full-image"}getThumbnail(e,s){return this.server+"/stackoptica/"+s+"/thumbnail"}async computeLandmarkPosition(e,s){const o=this.server+"/stackoptica/"+s.image.name+"/position?x="+s.marker.x+"&y="+s.marker.y;return me.get(o)}}const Ie={type:"ORTHANC",url:"http://localhost:8042"},ze={type:"DATA"};class at{static get(e){if(this._instances.get(e)==null){if(e=="WEB")return new Ws(Ie.url);if(e=="ORTHANC")return new Ns(Ie.url)}return this._instances.get(e)}}V(at,"_instances",new Map);class ve{static get(e){return this._instances.get(e)==null&&e=="DATA"?new As(at.get(Ie.type)):this._instances.get(e)}}V(ve,"_instances",new Map);ve.get(ze.type);const ot=De("settings",{state:()=>({isLeft:!1}),actions:{useToggleLeft(a){this.isLeft=a}},persist:{storage:localStorage,key:"settings"}}),Y=De("images",{state:()=>({objectPath:"",image:"stack",index:0,stackImages:new Array,individualImages:new Map,size:{width:-1,height:-1},zoom:-1,offset:{x:0,y:0}}),getters:{selectedImage:a=>a.index>=0&&a.index<a.stackImages.length&&a.image=="stack"?a.stackImages[a.index]:a.individualImages.has(a.image)?a.individualImages.get(a.image):{name:"RBINS Logo",label:"RBINS",image:"https://www.naturalsciences.be/bundles/8c62adb1e0fbef009ef7c06c69a991890012e203/img/logos/logo.svg"}},actions:{setPath(a){this.$reset(),this.objectPath=a},setIndex(a){this.index=Ae(We(0,a),this.stackImages.length-1)},moveIndex(a){this.index=Ae(We(0,this.index+a),this.stackImages.length-1)},increment(){this.moveIndex(1)},decrement(){this.moveIndex(-1)},getImageName(a){return a>=0&&a<this.stackImages.length?this.stackImages[a].name:"Image "+a}},persist:{storage:sessionStorage,key:"images"}}),ne=De("landmarks",{state:()=>({landmarks:Array(),distances:Array(),adjustFactor:1,scale:"mm",tab:"landmarks",selectedDistanceIndex:-1}),getters:{indexes:a=>new Map(a.distances.map((e,s)=>[e.label,s])),selectedDistance:a=>a.selectedDistanceIndex>=0&&a.selectedDistanceIndex<a.distances.length?a.distances[a.selectedDistanceIndex]:null},actions:{generateID(){let a=!1,e="";for(;!a;)e=(Math.random()+1).toString(36).substring(2),this.distances.forEach(s=>{s.landmarks.filter(o=>o.equals(e)).length==0&&(a=!0)}),this.landmarks.filter(s=>s.equals(e)).length==0&&(a=!0);return e}},persist:{storage:sessionStorage,key:"landmarks",afterHydrate:a=>{let e=new Array;a.store.$state.landmarks.forEach(o=>{let l=new ge(o.id,o.label,o.pose,o.position,X(o.color));e.push(l)}),a.store.$state.landmarks=e;let s=new Array;a.store.$state.distances.forEach(o=>{let l=o.landmarks.map(u=>new ge(u.id,u.label,u.pose,u.position,X(u.color))),d=new he(o.label,l,X(o.color));s.push(d)}),a.store.$state.distances=s}}});function C(...a){return jt(Vt(a))}var de=(a=>(a[a.m=1e3]="m",a[a.dm=100]="dm",a[a.cm=10]="cm",a[a.mm=1]="mm",a[a.µm=.001]="µm",a[a.nm=1e-6]="nm",a))(de||{});const qs=.1,Us=4,Ne=4.5,N=.2,Rs=v({__name:"Menubar",props:{modelValue:{},defaultValue:{},dir:{},loop:{type:Boolean},class:{}},emits:["update:modelValue"],setup(a,{emit:e}){const s=a,o=e,l=M(()=>{const{class:u,...f}=s;return f}),d=U(l,o);return(u,f)=>(m(),$(t(Et),D(t(d),{class:t(C)("flex h-10 items-center gap-x-1 rounded-md border bg-background p-1",s.class)}),{default:r(()=>[P(u.$slots,"default")]),_:3},16,["class"]))}}),ie=v({__name:"MenubarItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},emits:["select"],setup(a,{emit:e}){const s=a,o=e,l=M(()=>{const{class:u,...f}=s;return f}),d=U(l,o);return(u,f)=>(m(),$(t(Lt),D(t(d),{class:t(C)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",u.inset&&"pl-8",s.class)}),{default:r(()=>[P(u.$slots,"default")]),_:3},16,["class"]))}}),Ce=v({__name:"MenubarContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{default:8},align:{default:"start"},alignOffset:{default:-4},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(a){const e=a,s=M(()=>{const{class:l,...d}=e;return d}),o=K(s);return(l,d)=>(m(),$(t(Je),null,{default:r(()=>[n(t(Tt),D(t(o),{class:t(C)("z-50 min-w-48 overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e.class)}),{default:r(()=>[P(l.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),Pe=v({__name:"MenubarMenu",props:{value:{}},setup(a){const e=a;return(s,o)=>(m(),$(t(Ot),te(se(e)),{default:r(()=>[P(s.$slots,"default")]),_:3},16))}}),Xs=v({__name:"MenubarSub",props:{defaultOpen:{type:Boolean},open:{type:Boolean}},emits:["update:open"],setup(a,{emit:e}){const l=U(a,e);return(d,u)=>(m(),$(t(Ft),te(se(t(l))),{default:r(()=>[P(d.$slots,"default")]),_:3},16))}}),Ks=v({__name:"MenubarSubContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},sideOffset:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(a,{emit:e}){const s=a,o=e,l=M(()=>{const{class:u,...f}=s;return f}),d=U(l,o);return(u,f)=>(m(),$(t(Je),null,{default:r(()=>[n(t(Ht),D(t(d),{class:t(C)("z-50 min-w-32 overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s.class)}),{default:r(()=>[P(u.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),Zs=v({__name:"MenubarSubTrigger",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(a){const e=a,s=M(()=>{const{class:l,...d}=e;return d}),o=K(s);return(l,d)=>(m(),$(t(Wt),D(t(o),{class:t(C)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",l.inset&&"pl-8",e.class)}),{default:r(()=>[P(l.$slots,"default"),n(t(At),{class:"ml-auto h-4 w-4"})]),_:3},16,["class"]))}}),Be=v({__name:"MenubarTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(a){const e=a,s=M(()=>{const{class:l,...d}=e;return d}),o=K(s);return(l,d)=>(m(),$(t(Nt),D(t(o),{class:t(C)("flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",e.class)}),{default:r(()=>[P(l.$slots,"default")]),_:3},16,["class"]))}}),qe=v({__name:"MenubarShortcut",props:{class:{}},setup(a){const e=a;return(s,o)=>(m(),S("span",{class:O(t(C)("ml-auto text-xs tracking-widest text-muted-foreground",e.class))},[P(s.$slots,"default")],2))}}),Se=v({__name:"MenubarLabel",props:{asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(a){const e=a;return(s,o)=>(m(),$(t(qt),{class:O(t(C)("px-2 py-1.5 text-sm font-semibold",s.inset&&"pl-8",e.class))},{default:r(()=>[P(s.$slots,"default")]),_:3},8,["class"]))}}),Gs=v({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(a,{emit:e}){const l=U(a,e);return(d,u)=>(m(),$(t(Ut),te(se(t(l))),{default:r(()=>[P(d.$slots,"default")]),_:3},16))}}),Js=v({__name:"DialogClose",props:{asChild:{type:Boolean},as:{}},setup(a){const e=a;return(s,o)=>(m(),$(t(Ye),te(se(e)),{default:r(()=>[P(s.$slots,"default")]),_:3},16))}}),Ys=v({__name:"DialogTrigger",props:{asChild:{type:Boolean},as:{}},setup(a){const e=a;return(s,o)=>(m(),$(t(Rt),te(se(e)),{default:r(()=>[P(s.$slots,"default")]),_:3},16))}}),Qs=v({__name:"DialogHeader",props:{class:{}},setup(a){const e=a;return(s,o)=>(m(),S("div",{class:O(t(C)("flex flex-col gap-y-1.5 text-center sm:text-left",e.class))},[P(s.$slots,"default")],2))}}),ea=v({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(a){const e=a,s=M(()=>{const{class:l,...d}=e;return d}),o=K(s);return(l,d)=>(m(),$(t(Xt),D(t(o),{class:t(C)("text-lg font-semibold leading-none tracking-tight",e.class)}),{default:r(()=>[P(l.$slots,"default")]),_:3},16,["class"]))}}),ta=v({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(a){const e=a,s=M(()=>{const{class:l,...d}=e;return d}),o=K(s);return(l,d)=>(m(),$(t(Kt),D(t(o),{class:t(C)("text-sm text-muted-foreground",e.class)}),{default:r(()=>[P(l.$slots,"default")]),_:3},16,["class"]))}}),sa=v({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(a,{emit:e}){const s=a,o=e,l=M(()=>{const{class:u,...f}=s;return f}),d=U(l,o);return(u,f)=>(m(),$(t(Jt),null,{default:r(()=>[n(t(Zt),{class:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),n(t(Gt),D(t(d),{class:t(C)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s.class)}),{default:r(()=>[P(u.$slots,"default"),n(t(Ye),{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground"},{default:r(()=>[n(t(ue),{class:"w-4 h-4"}),f[0]||(f[0]=b("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},16,["class"])]),_:3}))}}),aa=v({__name:"DialogFooter",props:{class:{}},setup(a){const e=a;return(s,o)=>(m(),S("div",{class:O(t(C)("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",e.class))},[P(s.$slots,"default")],2))}}),ce=v({__name:"Input",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup(a,{emit:e}){const s=a,l=$t(s,"modelValue",e,{passive:!0,defaultValue:s.defaultValue});return(d,u)=>H((m(),S("input",{"onUpdate:modelValue":u[0]||(u[0]=f=>Pt(l)?l.value=f:null),class:O(t(C)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s.class))},null,2)),[[Ct,t(l)]])}}),R=v({__name:"Button",props:{variant:{},size:{},as:{default:"button"},class:{},asChild:{type:Boolean}},setup(a){const e=a;return(s,o)=>(m(),$(t(Yt),{as:s.as,"as-child":s.asChild,class:O(t(C)(t(oa)({variant:s.variant,size:s.size}),e.class))},{default:r(()=>[P(s.$slots,"default")]),_:3},8,["as","as-child","class"]))}}),oa=Qe("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),J=v({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{},class:{}},setup(a){const e=a,s=M(()=>{const{class:o,...l}=e;return l});return(o,l)=>(m(),$(t(Qt),D(s.value,{class:t(C)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e.class)}),{default:r(()=>[P(o.$slots,"default")]),_:3},16,["class"]))}}),Ue=v({__name:"Switch",props:{defaultChecked:{type:Boolean},checked:{type:Boolean},disabled:{type:Boolean},required:{type:Boolean},name:{},id:{},value:{},asChild:{type:Boolean},as:{},class:{}},emits:["update:checked"],setup(a,{emit:e}){const s=a,o=e,l=M(()=>{const{class:u,...f}=s;return f}),d=U(l,o);return(u,f)=>(m(),$(t(ts),D(t(d),{class:t(C)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s.class)}),{default:r(()=>[n(t(es),{class:O(t(C)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0"))},null,8,["class"])]),_:1},16,["class"]))}}),la={class:"flex flex-row justify-between h-full w-full"},na={class:"flex flex-row justify-between h-full w-full"},ra=v({__name:"Menu",setup(a){const e=ot(),s=ne(),o=Y(),l=Bt({storageKey:"localStorage"}),d=St(l);function u(){const h=[["Distance","Label","Color","Pose_X","Pose_Y","Image","ImageLabel","X","Y","Z"]];s.distances.forEach(k=>{k.landmarks.forEach(z=>{z=z;let Z=z.pose,L=z.position,A=[k.label,z.label,z.getColorHEX(),Z.marker.x.toString(),Z.marker.y.toString(),Z.image.name,Z.image.label,L.x.toString(),L.y.toString(),L.z.toString()];h.push(A)})});let p=h.map(k=>k.join(";")).join(`
`),w=new Blob([p],{type:"text/csv;charset=utf-8;"});He(w,"landmarks_"+o.objectPath+".csv")}function f(){const h=new Map;h.set("scale_factor",s.adjustFactor);let p=new Array;s.distances.forEach(k=>{let z=new Array;k.landmarks.forEach(L=>{z.push({id:L.id,label:L.label,color:L.getColorHEX(),pose:L.pose})});let Z={label:k.label,color:k.getColorHEX(),landmarks:JSON.parse(JSON.stringify(z))};p.push(Z)}),h.set("distances",p);var w=new Blob([JSON.stringify(Object.fromEntries(h.entries()))],{type:"application/json;charset=utf-8"});He(w,"landmarks_"+o.objectPath+"_"+new Date().getTime()+".json")}function g(h){h.preventDefault();let k=h.target.elements[0].files[0];k&&k.text().then(z=>{x(z)}).catch(z=>{console.error(z)})}function x(h){let p=JSON.parse(h),w=new Map(Object.entries(p));s.adjustFactor=w.get("scale_factor"),w.get("landmarks").forEach((z,Z)=>{let L=new Map(Object.entries(z)),A=L.get("landmarks").map(ye=>{let Q=new Map(Object.entries(ye));return new ge(s.generateID(),Q.get("label"),Q.get("pose"),Q.get("position"),X(Q.get("color")))}),W=new he(L.get("label"),A,X(L.get("color")));s.distances.push(W)})}return(h,p)=>(m(),S("div",null,[n(t(Gs),null,{default:r(()=>[n(t(Rs),{class:"rounded border-b z-100 h-10"},{default:r(()=>[n(t(Pe),null,{default:r(()=>[n(t(Be),{class:"relative"},{default:r(()=>p[0]||(p[0]=[B(" File ")])),_:1}),n(t(Ce),null,{default:r(()=>[n(t(Se),null,{default:r(()=>p[1]||(p[1]=[B(" Landmarks ")])),_:1}),n(t(Ys),{asChild:""},{default:r(()=>[n(t(ie),{inset:""},{default:r(()=>p[2]||(p[2]=[B("Import")])),_:1})]),_:1}),n(t(Xs),null,{default:r(()=>[n(t(Zs),{inset:""},{default:r(()=>p[3]||(p[3]=[B("Export")])),_:1}),n(t(Ks),null,{default:r(()=>[n(t(ie),{onSelect:u},{default:r(()=>p[4]||(p[4]=[B(" CSV ")])),_:1}),n(t(ie),{onSelect:f},{default:r(()=>p[5]||(p[5]=[B(" JSON ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),n(t(Pe),null,{default:r(()=>[n(t(Be),null,{default:r(()=>p[6]||(p[6]=[B("Edit")])),_:1}),n(t(Ce),null,{default:r(()=>[n(t(ie),{disabled:""},{default:r(()=>[p[8]||(p[8]=B(" Undo ")),n(t(qe),null,{default:r(()=>p[7]||(p[7]=[B("⌘Z")])),_:1})]),_:1}),n(t(ie),{disabled:""},{default:r(()=>[p[10]||(p[10]=B(" Redo ")),n(t(qe),null,{default:r(()=>p[9]||(p[9]=[B("⇧⌘Z")])),_:1})]),_:1})]),_:1})]),_:1}),n(t(Pe),null,{default:r(()=>[n(t(Be),null,{default:r(()=>p[11]||(p[11]=[B(" Settings ")])),_:1}),n(t(Ce),null,{default:r(()=>[n(t(Se),{inset:""},{default:r(()=>[b("div",la,[p[12]||(p[12]=b("span",null,"Dark Mode :",-1)),n(t(Ue),{checked:t(l),"onUpdate:checked":t(d),class:"inline-block align-middle ml-auto"},null,8,["checked","onUpdate:checked"])])]),_:1}),n(t(Se),{inset:""},{default:r(()=>[b("div",na,[p[13]||(p[13]=b("span",null,"Reverse Mode :",-1)),n(t(Ue),{checked:t(e).isLeft,"onUpdate:checked":t(e).useToggleLeft,class:"inline-block align-middle self-end"},null,8,["checked","onUpdate:checked"])])]),_:1})]),_:1})]),_:1})]),_:1}),n(t(sa),null,{default:r(()=>[n(t(Qs),null,{default:r(()=>[n(t(ea),null,{default:r(()=>p[14]||(p[14]=[B("Add the landmark file")])),_:1}),n(t(ta),null,{default:r(()=>p[15]||(p[15]=[B("Add the json files containing the landmarks")])),_:1})]),_:1}),b("form",{onSubmit:g},[n(t(J),null,{default:r(()=>p[16]||(p[16]=[B("File")])),_:1}),n(t(ce),{type:"file",placeholder:"your landmark json file"}),n(t(aa),null,{default:r(()=>[n(t(Js),{"as-child":""},{default:r(()=>[n(t(R),{type:"submit"},{default:r(()=>p[17]||(p[17]=[B("Confirm")])),_:1})]),_:1})]),_:1})],32)]),_:1})]),_:1})]))}}),_e=v({__name:"Separator",props:{orientation:{},decorative:{type:Boolean},asChild:{type:Boolean},as:{},class:{},label:{}},setup(a){const e=a,s=M(()=>{const{class:o,...l}=e;return l});return(o,l)=>(m(),$(t(ss),D(s.value,{class:t(C)("shrink-0 bg-border relative",e.orientation==="vertical"?"w-px h-full":"h-px w-full",e.class)}),{default:r(()=>[e.label?(m(),S("span",{key:0,class:O(t(C)("text-xs text-muted-foreground bg-background absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex justify-center items-center",e.orientation==="vertical"?"w-[1px] px-1 py-2":"h-[1px] py-1 px-2"))},E(e.label),3)):ae("",!0)]),_:1},16,["class"]))}}),ia={class:"scroll-align border flex grow p-2"},da={class:"h-12 flex grow flex-row justify-between items-center font-normal px-3 py-2"},ua={class:"flex flex-row w-full items-center justify-start space-x-3 py-3 mr-3"},ca=["value","onChange"],fa={class:"flex items-center h-full w-auto justify-end space-x-3 pr-3"},pa={class:"flex items-center justify-end"},ma=v({__name:"LandmarkList",setup(a){const e=ne();Y();const s=F(!0),o=F(null),l=F(null);function d(g,x){let h=g.currentTarget;h!=null&&x.setColorHEX(h.value)}function u(g,x){x.setLabel(g.toString())}function f(g){e.landmarks=e.landmarks.filter(x=>!x.equals(g))}return(g,x)=>(m(),S("div",{ref_key:"landmarksScroll",ref:l,class:O(["overflow-auto min-h-16 max-h-96 w-full border",{"scroll-snap-type":s.value}])},[n(t(Ge),{ref_key:"landmarksElements",ref:o,modelValue:t(e).landmarks,"onUpdate:modelValue":x[1]||(x[1]=h=>t(e).landmarks=h),group:"landmarks","item-key":"id","force-fallback":!0,animation:150,scroll:!0,bubbleScroll:!0,handle:".handle",class:"relative w-fit min-w-full",onStart:x[2]||(x[2]=h=>s.value=!1),onEnd:x[3]||(x[3]=h=>s.value=!0)},{item:r(({element:h})=>[b("div",ia,[b("div",da,[b("div",ua,[x[4]||(x[4]=b("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",class:"flex-none mr-2 h-6 w-6 handle"},[b("path",{d:"M7.49985 0.877045C3.84216 0.877045 0.877014 3.84219 0.877014 7.49988C0.877014 11.1575 3.84216 14.1227 7.49985 14.1227C11.1575 14.1227 14.1227 11.1575 14.1227 7.49988C14.1227 3.84219 11.1575 0.877045 7.49985 0.877045ZM1.82701 7.49988C1.82701 4.36686 4.36683 1.82704 7.49985 1.82704C10.6328 1.82704 13.1727 4.36686 13.1727 7.49988C13.1727 10.6329 10.6328 13.1727 7.49985 13.1727C4.36683 13.1727 1.82701 10.6329 1.82701 7.49988ZM7.49999 9.49999C8.60456 9.49999 9.49999 8.60456 9.49999 7.49999C9.49999 6.39542 8.60456 5.49999 7.49999 5.49999C6.39542 5.49999 5.49999 6.39542 5.49999 7.49999C5.49999 8.60456 6.39542 9.49999 7.49999 9.49999Z",fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"})],-1)),b("input",{type:"color",class:"flex-none h-8 w-8 block bg-white border border-gray-950 cursor-pointer rounded-lg disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-300",id:"hs-color-input",value:h.getColorHEX(),title:"Choose your color",onChange:p=>d(p,h)},null,40,ca),H(n(t(J),{class:"whitespace-nowrap",onDblclick:re(p=>h.setEdit(!0),["stop"])},{default:r(()=>[B(E(h.label),1)]),_:2},1032,["onDblclick"]),[[q,!h.getEdit()]]),H(n(t(ce),{onDblclick:x[0]||(x[0]=re(()=>{},["stop"])),type:"text","model-value":h.label,class:"flew grow h-auto",onFocusout:p=>h.setEdit(!1),onKeyup:pe(p=>h.setEdit(!1),["enter"]),"onUpdate:modelValue":p=>u(p,h)},null,8,["model-value","onFocusout","onKeyup","onUpdate:modelValue"]),[[q,h.getEdit()]])]),b("div",fa,[n(_e,{orientation:"vertical",class:"h-full w-0.5"}),n(t(J),{class:"whitespace-nowrap"},{default:r(()=>[B(E(h.pose.image.label),1)]),_:2},1024)]),b("div",pa,[H(n(t(R),{class:"w-6 h-6 p-0 mr-3",variant:"secondary",onClick:p=>h.show=!1},{default:r(()=>[n(t(et),{class:"relative w-4 h-4 p-0"})]),_:2},1032,["onClick"]),[[q,h.show]]),H(n(t(R),{class:"w-6 h-6 p-0 mr-3",variant:"secondary",onClick:p=>h.show=!0},{default:r(()=>[n(t(tt),{class:"relative w-4 h-4 p-0"})]),_:2},1032,["onClick"]),[[q,!h.show]]),n(t(R),{class:"w-6 h-6 p-0",variant:"destructive",onClick:p=>f(h.getId())},{default:r(()=>[n(t(ue),{class:"relative w-4 h-4 p-0"})]),_:2},1032,["onClick"])])])])]),_:1},8,["modelValue"])],2))}}),lt=v({__name:"Select",props:{open:{type:Boolean},defaultOpen:{type:Boolean},defaultValue:{},modelValue:{},dir:{},name:{},autocomplete:{},disabled:{type:Boolean},required:{type:Boolean}},emits:["update:modelValue","update:open"],setup(a,{emit:e}){const l=U(a,e);return(d,u)=>(m(),$(t(as),te(se(t(l))),{default:r(()=>[P(d.$slots,"default")]),_:3},16))}}),nt=v({__name:"SelectValue",props:{placeholder:{},asChild:{type:Boolean},as:{}},setup(a){const e=a;return(s,o)=>(m(),$(t(os),te(se(e)),{default:r(()=>[P(s.$slots,"default")]),_:3},16))}}),rt=v({__name:"SelectTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(a){const e=a,s=M(()=>{const{class:l,...d}=e;return d}),o=K(s);return(l,d)=>(m(),$(t(ns),D(t(o),{class:t(C)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e.class)}),{default:r(()=>[P(l.$slots,"default"),n(t(ls),{"as-child":""},{default:r(()=>[n(t(st),{class:"w-4 h-4 opacity-50"})]),_:1})]),_:3},16,["class"]))}}),it=v({inheritAttrs:!1,__name:"SelectContent",props:{forceMount:{type:Boolean},position:{default:"popper"},bodyLock:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(a,{emit:e}){const s=a,o=e,l=M(()=>{const{class:u,...f}=s;return f}),d=U(l,o);return(u,f)=>(m(),$(t(ds),null,{default:r(()=>[n(t(is),D({...t(d),...u.$attrs},{class:t(C)("relative z-50 max-h-96 min-w-32 overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",u.position==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s.class)}),{default:r(()=>[n(t(ha)),n(t(rs),{class:O(t(C)("p-1",u.position==="popper"&&"h-[--radix-select-trigger-height] w-full min-w-[--radix-select-trigger-width]"))},{default:r(()=>[P(u.$slots,"default")]),_:3},8,["class"]),n(t(va))]),_:3},16,["class"])]),_:3}))}}),dt=v({__name:"SelectGroup",props:{asChild:{type:Boolean},as:{},class:{}},setup(a){const e=a,s=M(()=>{const{class:o,...l}=e;return l});return(o,l)=>(m(),$(t(us),D({class:t(C)("p-1 w-full",e.class)},s.value),{default:r(()=>[P(o.$slots,"default")]),_:3},16,["class"]))}}),ga={class:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},Me=v({__name:"SelectItem",props:{value:{},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{}},setup(a){const e=a,s=M(()=>{const{class:l,...d}=e;return d}),o=K(s);return(l,d)=>(m(),$(t(ms),D(t(o),{class:t(C)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e.class)}),{default:r(()=>[b("span",ga,[n(t(fs),null,{default:r(()=>[n(t(cs),{class:"h-4 w-4"})]),_:1})]),n(t(ps),null,{default:r(()=>[P(l.$slots,"default")]),_:3})]),_:3},16,["class"]))}}),ut=v({__name:"SelectLabel",props:{for:{},asChild:{type:Boolean},as:{},class:{}},setup(a){const e=a;return(s,o)=>(m(),$(t(gs),{class:O(t(C)("py-1.5 pl-8 pr-2 text-sm font-semibold",e.class))},{default:r(()=>[P(s.$slots,"default")]),_:3},8,["class"]))}}),ha=v({__name:"SelectScrollUpButton",props:{asChild:{type:Boolean},as:{},class:{}},setup(a){const e=a,s=M(()=>{const{class:l,...d}=e;return d}),o=K(s);return(l,d)=>(m(),$(t(vs),D(t(o),{class:t(C)("flex cursor-default items-center justify-center py-1",e.class)}),{default:r(()=>[P(l.$slots,"default",{},()=>[n(t(hs),{class:"h-4 w-4"})])]),_:3},16,["class"]))}}),va=v({__name:"SelectScrollDownButton",props:{asChild:{type:Boolean},as:{},class:{}},setup(a){const e=a,s=M(()=>{const{class:l,...d}=e;return d}),o=K(s);return(l,d)=>(m(),$(t(_s),D(t(o),{class:t(C)("flex cursor-default items-center justify-center py-1",e.class)}),{default:r(()=>[P(l.$slots,"default",{},()=>[n(t(st),{class:"h-4 w-4"})])]),_:3},16,["class"]))}}),_a={class:"flex grow w-full flex-col space-y-5"},ya=v({__name:"DistanceList",setup(a){const e=ne(),{selectedDistanceIndex:s}=ys(e);function o(l){e.selectedDistanceIndex=Number(l)}return(l,d)=>(m(),S("div",_a,[n(t(lt),{class:"flex grow w-full","model-value":t(s).toString(),"onUpdate:modelValue":o},{default:r(()=>[n(t(rt),{class:"w-full"},{default:r(()=>[n(t(nt),{placeholder:"Pick a distance"})]),_:1}),n(t(it),null,{default:r(()=>[n(t(dt),null,{default:r(()=>[n(t(ut),null,{default:r(()=>d[0]||(d[0]=[B("Scale")])),_:1}),n(t(Me),{class:"h-8",value:"-1"}),(m(!0),S(oe,null,le(t(e).distances,(u,f)=>(m(),$(t(Me),{class:"h-8",value:f.toString()},{default:r(()=>[B(E(u.label),1)]),_:2},1032,["value"]))),256))]),_:1})]),_:1})]),_:1},8,["model-value"]),t(e).selectedDistance!=null?(m(),$(t(Re),{key:0,distance:t(e).selectedDistance,index:t(e).selectedDistanceIndex,showLandmarks:!0},null,8,["distance","index"])):ae("",!0),(m(!0),S(oe,null,le(t(e).distances.map((u,f)=>[u,f]).filter(u=>u[1]!=t(e).selectedDistanceIndex),u=>(m(),S("div",null,[u[1]!=t(e).selectedDistanceIndex?(m(),$(t(Re),{key:0,distance:u[0],index:u[1],showLandmarks:!1,onDblclick:f=>t(e).selectedDistanceIndex=u[1]},null,8,["distance","index","onDblclick"])):ae("",!0)]))),256))]))}}),ba={class:"w-full"},wa={class:"flex flex-row"},xa={class:"w-full h-full flex justify-end space-x-2"},ka={class:"flex min-h-48 min-w-full w-fit flex flex-col border"},$a={class:"flex flex-col min-w-full w-fit h-10"},Ca={class:"flex flex-row items-center justify-between space-x-3 px-3 w-full h-full"},Pa={class:"flex flex-row items-center justify-start space-x-3"},Ba={class:"flex flex-row items-center justify-end space-x-3"},Sa=.01,Ia=v({__name:"DistanceComputed",setup(a){const e=ne();Y();function s(d){let u=0;return d.forEach(f=>{let g=Ts(f,Os),x=Fs(g);u+=Hs(x)}),u}function o(d,u){e.adjustFactor=fe(d)/s(u.distance)*fe(de[e.scale])}function l(){e.adjustFactor=1}return(d,u)=>(m(),S("div",ba,[b("div",wa,[u[3]||(u[3]=b("h2",{class:"flex items-center px-7 text-lg font-semibold tracking-tight"}," Measures ",-1)),b("div",xa,[n(t(lt),{modelValue:t(e).scale,"onUpdate:modelValue":u[0]||(u[0]=f=>t(e).scale=f)},{default:r(()=>[n(t(rt),{class:"w-16"},{default:r(()=>[n(t(nt),{placeholder:"Pick a scale"})]),_:1}),n(t(it),null,{default:r(()=>[n(t(dt),null,{default:r(()=>[n(t(ut),null,{default:r(()=>u[1]||(u[1]=[B("Scale")])),_:1}),(m(!0),S(oe,null,le(Object.keys(t(de)).filter(f=>isNaN(Number(f))),f=>(m(),$(t(Me),{value:f},{default:r(()=>[B(E(f),1)]),_:2},1032,["value"]))),256))]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(t(R),{variant:"secondary",onClick:l},{default:r(()=>u[2]||(u[2]=[B(" Reset Scale ")])),_:1})])]),b("div",ka,[(m(!0),S(oe,null,le(t(e).distances,(f,g)=>(m(),S("div",$a,[b("div",Ca,[b("div",Pa,[n(t(J),{class:"flex whitespace-nowrap w-auto"},{default:r(()=>[B(E(f.label),1)]),_:2},1024)]),b("div",Ba,[H(n(t(J),{class:"flex whitespace-nowrap w-auto",onDblclick:x=>f.edit_distance=!0},{default:r(()=>[B(E(Ls(f.distance?s(f.distance)*t(e).adjustFactor/fe(t(de)[t(e).scale]):0,5))+" "+E(t(e).scale),1)]),_:2},1032,["onDblclick"]),[[q,!f.edit_distance]]),H(n(t(ce),{type:"number",min:0,step:Sa,"model-value":f.distance?s(f.distance)*t(e).adjustFactor/fe(t(de)[t(e).scale]):0,class:"flex h-auto w-auto px-0",onFocusout:x=>f.edit_distance=!1,onKeyup:pe(x=>f.edit_distance=!1,["enter"]),"onUpdate:modelValue":x=>o(x,f)},null,8,["model-value","onFocusout","onKeyup","onUpdate:modelValue"]),[[q,f.edit_distance]]),n(t(R),{class:"relative w-6 h-6 p-0",variant:"destructive",onClick:x=>t(e).distances.splice(g,1)},{default:r(()=>[n(t(ue),{class:"relative w-4 h-4 p-0"})]),_:2},1032,["onClick"])])]),n(t(_e),{class:"w-full"})]))),256))])]))}}),Ma={class:"flex pr-2 py-2 border-transparent border-2"},Da={class:"flex grow row justify-between items-center pr-3 py-2"},za={class:"flex grow row w-full justify-start items-center space-x-3 mr-3"},ja=["value"],Va={class:"flex row justify-end space-x-3"},Ea={class:"scroll-align border flex grow p-2"},La={class:"h-12 flex grow row justify-between items-center font-normal px-3 py-2"},Ta={class:"flex items-center justify-start w-full space-x-3 py-3 mr-3"},Oa={class:"flex items-center h-full w-auto justify-end space-x-3 pr-3"},Fa={class:"flex items-center justify-end space-x-3"},Re=v({__name:"DistanceIteration",props:{distance:{type:he,required:!0},index:{type:Number,required:!0},showLandmarks:{type:Boolean,default:!0}},setup(a){const e=a,s=ne();Y();const o=F(!0),l=F(null),d=F(null);function u(p){let w=p.currentTarget;w!=null&&(e.distance.setColorHEX(w.value),e.distance.landmarks.forEach(k=>k.setColorHEX(w.value)))}function f(p){e.distance.remove(p),e.distance.landmarks.length==0&&s.distances.splice(e.index,1)}function g(p,w){w.setLabel(p.toString())}function x(p){e.distance.label=p.toString()}function h(){e.index<=s.selectedDistanceIndex&&s.selectedDistanceIndex--,s.distances.splice(e.index,1)}return(p,w)=>(m(),S("div",null,[b("div",Ma,[b("div",Da,[b("div",za,[b("input",{type:"color",class:"h-8 w-8 block bg-white border border-gray-950 cursor-pointer rounded-lg disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-300",id:"hs-color-input",value:e.distance.getColorHEX(),title:"Choose your color",onChange:w[0]||(w[0]=k=>u(k))},null,40,ja),H(n(t(J),{class:"flex whitespace-nowrap w-36 font-normal text-lg",onDblclick:w[1]||(w[1]=k=>e.distance.edit_label=!0)},{default:r(()=>[B(E(e.distance.label),1)]),_:1},512),[[q,!e.distance.edit_label]]),H(n(t(ce),{type:"text","model-value":e.distance.label,class:"flex h-auto w-full px-0",onFocusout:w[2]||(w[2]=k=>e.distance.edit_label=!1),onKeyup:w[3]||(w[3]=pe(k=>e.distance.edit_label=!1,["enter"])),"onUpdate:modelValue":w[4]||(w[4]=k=>x(k))},null,8,["model-value"]),[[q,e.distance.edit_label]])]),b("div",Va,[H(n(t(R),{class:"relative w-6 h-6 p-0",variant:"secondary",onClick:w[5]||(w[5]=k=>e.distance.show=!1)},{default:r(()=>[n(t(et),{class:"relative w-4 h-4 p-0"})]),_:1},512),[[q,e.distance.show]]),H(n(t(R),{class:"relative w-6 h-6 p-0",variant:"secondary",onClick:w[6]||(w[6]=k=>e.distance.show=!0)},{default:r(()=>[n(t(tt),{class:"relative w-4 h-4 p-0"})]),_:1},512),[[q,!e.distance.show]]),n(t(R),{class:"relative w-6 h-6 p-0",variant:"secondary",onClick:w[7]||(w[7]=k=>e.distance.reset())},{default:r(()=>[n(t(bs),{class:"relative w-4 h-4 p-0"})]),_:1}),n(t(R),{class:"relative w-6 h-6 p-0",variant:"destructive",onClick:w[8]||(w[8]=k=>h())},{default:r(()=>[n(t(ue),{class:"relative w-4 h-4 p-0"})]),_:1})])])]),a.showLandmarks?(m(),S("div",{key:0,ref_key:"landmarksScroll",ref:d,class:O(["overflow-auto min-h-16 max-h-96 w-full border",{"scroll-snap-type":o.value}])},[n(t(Ge),{ref_key:"landmarksElements",ref:l,modelValue:a.distance.landmarks,"onUpdate:modelValue":w[10]||(w[10]=k=>a.distance.landmarks=k),group:a.distance.label+"_landmarks_"+a.index,"item-key":"id","force-fallback":!0,animation:150,scroll:!0,bubbleScroll:!0,handle:".handle",class:"relative w-fit min-w-full",onStart:w[11]||(w[11]=k=>o.value=!1),onEnd:w[12]||(w[12]=k=>o.value=!0)},{item:r(({element:k})=>[b("div",Ea,[b("div",La,[b("div",Ta,[w[13]||(w[13]=b("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",class:"mr-2 h-6 w-6 handle"},[b("path",{d:"M7.49985 0.877045C3.84216 0.877045 0.877014 3.84219 0.877014 7.49988C0.877014 11.1575 3.84216 14.1227 7.49985 14.1227C11.1575 14.1227 14.1227 11.1575 14.1227 7.49988C14.1227 3.84219 11.1575 0.877045 7.49985 0.877045ZM1.82701 7.49988C1.82701 4.36686 4.36683 1.82704 7.49985 1.82704C10.6328 1.82704 13.1727 4.36686 13.1727 7.49988C13.1727 10.6329 10.6328 13.1727 7.49985 13.1727C4.36683 13.1727 1.82701 10.6329 1.82701 7.49988ZM7.49999 9.49999C8.60456 9.49999 9.49999 8.60456 9.49999 7.49999C9.49999 6.39542 8.60456 5.49999 7.49999 5.49999C6.39542 5.49999 5.49999 6.39542 5.49999 7.49999C5.49999 8.60456 6.39542 9.49999 7.49999 9.49999Z",fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"})],-1)),H(n(t(J),{class:"whitespace-nowrap",onDblclick:re(z=>k.setEdit(!0),["stop"])},{default:r(()=>[B(E(k.label),1)]),_:2},1032,["onDblclick"]),[[q,!k.getEdit()]]),H(n(t(ce),{onDblclick:w[9]||(w[9]=re(()=>{},["stop"])),type:"text","model-value":k.label,class:"h-auto",onFocusout:z=>k.setEdit(!1),onKeyup:pe(z=>k.setEdit(!1),["enter"]),"onUpdate:modelValue":z=>g(z,k)},null,8,["model-value","onFocusout","onKeyup","onUpdate:modelValue"]),[[q,k.getEdit()]])]),b("div",Oa,[n(_e,{orientation:"vertical",class:"h-full w-0.5"}),n(t(J),{class:"whitespace-nowrap"},{default:r(()=>[B(E(k.pose.image.label),1)]),_:2},1024)]),b("div",Fa,[n(t(R),{class:"relative w-6 h-6 p-0",variant:"destructive",onClick:z=>f(k.id)},{default:r(()=>[n(t(ue),{class:"relative w-4 h-4 p-0"})]),_:2},1032,["onClick"])])])])]),_:1},8,["modelValue","group"])],2)):ae("",!0)]))}}),Ha=v({__name:"Slider",props:{name:{},defaultValue:{},modelValue:{},disabled:{type:Boolean},orientation:{},dir:{},inverted:{type:Boolean},min:{},max:{},step:{},minStepsBetweenThumbs:{},asChild:{type:Boolean},as:{},class:{}},emits:["update:modelValue","valueCommit"],setup(a,{emit:e}){const s=a,o=e,l=M(()=>{const{class:u,...f}=s;return f}),d=U(l,o);return(u,f)=>(m(),$(t($s),D({class:t(C)("relative flex w-full touch-none select-none items-center",s.class)},t(d)),{default:r(()=>[n(t(xs),{class:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary"},{default:r(()=>[n(t(ws),{class:"absolute h-full bg-primary"})]),_:1}),(m(!0),S(oe,null,le(u.modelValue,(g,x)=>(m(),$(t(ks),{key:x,class:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"}))),128))]),_:1},16,["class"]))}}),Aa=v({__name:"Tabs",props:{defaultValue:{},orientation:{},dir:{},activationMode:{},modelValue:{},asChild:{type:Boolean},as:{}},emits:["update:modelValue"],setup(a,{emit:e}){const l=U(a,e);return(d,u)=>(m(),$(t(Cs),te(se(t(l))),{default:r(()=>[P(d.$slots,"default")]),_:3},16))}}),Xe=v({__name:"TabsTrigger",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(a){const e=a,s=M(()=>{const{class:l,...d}=e;return d}),o=K(s);return(l,d)=>(m(),$(t(Ps),D(t(o),{class:t(C)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e.class)}),{default:r(()=>[P(l.$slots,"default")]),_:3},16,["class"]))}}),Wa=v({__name:"TabsList",props:{loop:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(a){const e=a,s=M(()=>{const{class:o,...l}=e;return l});return(o,l)=>(m(),$(t(Bs),D(s.value,{class:t(C)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e.class)}),{default:r(()=>[P(o.$slots,"default")]),_:3},16,["class"]))}}),Ke=v({__name:"TabsContent",props:{value:{},forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(a){const e=a,s=M(()=>{const{class:o,...l}=e;return l});return(o,l)=>(m(),$(t(Ss),D({class:t(C)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e.class)},s.value),{default:r(()=>[P(o.$slots,"default")]),_:3},16,["class"]))}}),Na=v({__name:"ToggleGroup",props:{rovingFocus:{type:Boolean},disabled:{type:Boolean},orientation:{},dir:{},loop:{type:Boolean},asChild:{type:Boolean},as:{},type:{},modelValue:{},defaultValue:{},class:{},variant:{},size:{}},emits:["update:modelValue"],setup(a,{emit:e}){const s=a,o=e;It("toggleGroup",{variant:s.variant,size:s.size});const l=M(()=>{const{class:u,...f}=s;return f}),d=U(l,o);return(u,f)=>(m(),$(t(Is),D(t(d),{class:t(C)("flex items-center justify-center gap-1",s.class)}),{default:r(()=>[P(u.$slots,"default")]),_:3},16,["class"]))}}),qa=Qe("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),Ze=v({__name:"ToggleGroupItem",props:{value:{},defaultValue:{type:Boolean},pressed:{type:Boolean},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{},variant:{},size:{}},setup(a){const e=a,s=Mt("toggleGroup"),o=M(()=>{const{class:d,variant:u,size:f,...g}=e;return g}),l=K(o);return(d,u)=>{var f,g;return m(),$(t(Ms),D(t(l),{class:t(C)(t(qa)({variant:((f=t(s))==null?void 0:f.variant)||d.variant,size:((g=t(s))==null?void 0:g.size)||d.size}),e.class)}),{default:r(()=>[P(d.$slots,"default")]),_:3},16,["class"])}}}),Ua={class:"flex flex-col pb-[12px] w-auto h-full"},Ra={class:"flex-none space-y-4 py-4"},Xa={class:"flex-none space-y-4 py-4"},Ka={class:"px-3 py-2"},Za={className:"mt-1.5 flex flex-row justify-between"},Ga={class:"w-5 text-center"},Ja={class:"flex grow items-end mt-4"},Ya=v({__name:"Sidebar",setup(a){const e=Y(),s=ne();return(o,l)=>(m(),S("div",Ua,[b("div",Ra,[n(t(Na),{type:"single","model-value":t(e).image,"onUpdate:modelValue":l[0]||(l[0]=d=>t(e).image=d.toString())},{default:r(()=>[n(t(Ze),{value:"stack"},{default:r(()=>l[3]||(l[3]=[B(" Stack ")])),_:1}),(m(!0),S(oe,null,le(t(e).individualImages.keys(),d=>(m(),$(t(Ze),{value:d},{default:r(()=>[B(E(d),1)]),_:2},1032,["value"]))),256))]),_:1},8,["model-value"])]),b("div",Xa,[b("div",Ka,[n(t(Ha),{"model-value":[t(e).index],max:t(e).stackImages.length-1,step:1,"onUpdate:modelValue":l[1]||(l[1]=d=>t(e).setIndex(d[0]))},null,8,["model-value","max"]),b("div",Za,[(m(!0),S(oe,null,le(new Array(t(e).stackImages.length),d=>(m(),S("span",Ga," | "))),256))])]),n(t(Aa),{"model-value":t(s).tab,"onUpdate:modelValue":l[2]||(l[2]=d=>t(s).tab=d.toString()),"default-value":"landmarks",class:"w-full my-4"},{default:r(()=>[n(t(Wa),{class:"grid w-full grid-cols-2"},{default:r(()=>[n(t(Xe),{value:"landmarks"},{default:r(()=>l[4]||(l[4]=[B(" Landmarks ")])),_:1}),n(t(Xe),{value:"distances"},{default:r(()=>l[5]||(l[5]=[B(" Distances ")])),_:1})]),_:1}),n(t(Ke),{value:"landmarks"},{default:r(()=>[n(t(ma))]),_:1}),n(t(Ke),{value:"distances"},{default:r(()=>[n(t(ya))]),_:1})]),_:1},8,["model-value"])]),b("div",Ja,[n(t(Ia))])]))}}),Qa=["src","alt"],eo=v({__name:"ImageViewer",props:{class:{}},setup(a){const e=ve.get(ze.type),s=ne(),o=Y();s.$subscribe((i,c)=>{W()});const l=a;o.$subscribe((i,c)=>{W()});const d=F(null),u=F(null),f=F(null),g=F({x:0,y:0}),x=F(!1),h=F(null),p=F({x:-1,y:-1}),w=i=>i*Math.PI/180;Dt(()=>{const i=new ResizeObserver(function(){d.value&&f.value&&u.value&&(f.value.width=Math.floor(d.value.clientWidth),f.value.height=Math.floor(d.value.clientHeight),W())});d.value&&i.observe(d.value)});function k(){Fe(()=>{if(o.zoom<=0&&ye(),u.value.alt.startsWith("Thumbnail")){let i=o.selectedImage.name;setTimeout(()=>{i==o.selectedImage.name&&Fe(()=>{u.value.alt.endsWith(i)&&(u.value.src=e.getFullImage(o.objectPath,i),u.value.alt=i,W())})},500)}W()})}function z(){if(f.value&&u.value&&u.value.complete&&o.zoom>0){let i=Q(),c=f.value.getContext("2d"),y=o.zoom/i.ratioW,_=o.zoom/i.ratioH,j=Ne/y;c.scale(y,_),c.translate(o.offset.x*i.ratioW,o.offset.y*i.ratioH),g.value={x:Math.max(0,(f.value.width-u.value.naturalWidth*y)/2)/y,y:Math.max(0,(f.value.height-u.value.naturalHeight*_)/2)/_},c.drawImage(u.value,0,0,u.value.naturalWidth,u.value.naturalHeight,g.value.x,g.value.y,u.value.naturalWidth,u.value.naturalHeight),s.distances.forEach(I=>{if(I.landmarks.length==0||!I.show)return;c.beginPath();let T=I.landmarks[0],ee=T.equals(h.value)?p.value:T.pose.marker,G={x:ee.x*i.ratioW+g.value.x,y:ee.y*i.ratioH+g.value.y};c.moveTo(G.x,G.y);for(let ke=1;ke<I.landmarks.length;ke++)T=I.landmarks[ke],ee=T.equals(h.value)?p.value:T.pose.marker,G={x:ee.x*i.ratioW+g.value.x,y:ee.y*i.ratioH+g.value.y},c.lineTo(G.x,G.y);c.strokeStyle=I.getColorHEX(),c.lineWidth=j/4,c.stroke(),c.closePath()}),s.landmarks.forEach(I=>{if(I.show)if(I.equals(h.value)){let T=p.value;T={x:T.x*i.ratioW,y:T.y*i.ratioH},Z(c,T,j)}else L(c,I,j)}),s.distances.forEach(I=>{I.show&&I.landmarks.forEach((T,ee)=>{if(T.equals(h.value)){let G=p.value;G={x:G.x*i.ratioW,y:G.y*i.ratioH},Z(c,G,j)}else L(c,T,j)})})}}function Z(i,c,y){const _=y*4;i.beginPath(),i.arc(c.x+g.value.x,c.y+g.value.y,_,0,2*Math.PI),i.strokeStyle="white",i.lineWidth=y/2,i.stroke(),i.closePath(),i.beginPath();let j=A(c,45,_,g.value),I=A(c,45,_*N,g.value);i.moveTo(j.x,j.y),i.lineTo(I.x,I.y),j=A(c,135,_,g.value),I=A(c,135,_*N,g.value),i.moveTo(j.x,j.y),i.lineTo(I.x,I.y),j=A(c,225,_,g.value),I=A(c,225,_*N,g.value),i.moveTo(j.x,j.y),i.lineTo(I.x,I.y),j=A(c,315,_,g.value),I=A(c,315,_*N,g.value),i.moveTo(j.x,j.y),i.lineTo(I.x,I.y),i.strokeStyle="white",i.lineWidth=y/3,i.stroke(),i.closePath(),i.beginPath(),i.moveTo(c.x+g.value.x+_*(1-N),c.y+g.value.y),i.lineTo(c.x+g.value.x+_*N,c.y+g.value.y),i.moveTo(c.x+g.value.x-_*(1-N),c.y+g.value.y),i.lineTo(c.x+g.value.x-_*N,c.y+g.value.y),i.moveTo(c.x+g.value.x,c.y+g.value.y+_*(1-N)),i.lineTo(c.x+g.value.x,c.y+g.value.y+_*N),i.moveTo(c.x+g.value.x,c.y+g.value.y-_*(1-N)),i.lineTo(c.x+g.value.x,c.y+g.value.y-_*N),i.strokeStyle="black",i.lineWidth=y/3,i.stroke(),i.closePath()}function L(i,c,y){let _=Q(),j={x:c.getPose().marker.x*_.ratioW,y:c.getPose().marker.y*_.ratioH};i.beginPath(),i.arc(j.x+g.value.x,j.y+g.value.y,y,0,2*Math.PI),i.fillStyle=c.getColorHEX(),i.fill(),i.lineWidth=y/2,i.strokeStyle=c.getPose().image.name==o.selectedImage.name||o.image!="stack"?"black":"white",i.stroke(),i.closePath()}function A(i,c,y,_={x:0,y:0}){return{x:i.x+y*Math.cos(w(c))+_.x,y:i.y+y*Math.sin(w(c))+_.y}}function W(){f.value&&u.value&&u.value.complete&&(f.value.width=f.value.width,we(0,0),z())}function ye(){d.value&&f.value&&(f.value.width=Math.floor(d.value.clientWidth),f.value.height=Math.floor(d.value.clientHeight),o.zoom=Math.min(d.value.clientWidth/o.size.width,d.value.clientHeight/o.size.height))}function Q(){return u.value&&u.value.complete?{ratioW:u.value.naturalWidth/o.size.width,ratioH:u.value.naturalHeight/o.size.height}:{ratioW:0,ratioH:0}}function be(i){const c=f.value.getBoundingClientRect();let y=(i.pageX-c.left)/o.zoom-o.offset.x-g.value.x,_=(i.pageY-c.top)/o.zoom-o.offset.y-g.value.y;return{x:y,y:_}}function we(i,c){f.value&&(o.offset.x=o.offset.x+i/o.zoom,o.offset.y=o.offset.y+c/o.zoom,o.offset.x=Math.min(0,Math.max(-(o.size.width*o.zoom-f.value.width)/o.zoom,o.offset.x)),o.offset.y=Math.min(0,Math.max(-(o.size.height*o.zoom-f.value.height)/o.zoom,o.offset.y)))}function ft(i){o.zoom=+(o.zoom*(1+i/20)).toFixed(2),o.zoom=Math.max(qs,Math.min(Us,o.zoom))}function pt(i){let c=o.zoom;ft(Math.sign(-i.deltaY));let y=o.zoom/c;const _=f.value.getBoundingClientRect();let j=i.pageX-_.left,I=i.pageY-_.top,T=-(_.width*y-_.width)*(j/_.width),ee=-(_.height*y-_.height)*(I/_.height);we(T,ee),W()}function mt(i){let c=be(i);if(o.image!="stack"){x.value=!0;return}if(i.button==0){x.value=!0;let y=Te(c);h.value=y,p.value=(y==null?void 0:y.pose.marker)??{x:-1,y:-1}}else if(i.button==2){let y={marker:c,image:o.selectedImage};if(!vt(c))return;let _=Te(c);if(_)wt(_);else switch(s.tab){case"landmarks":bt(y);break;case"distances":s.selectedDistance?yt(y,s.selectedDistance):(_t(y),s.selectedDistanceIndex=s.distances.length-1);break}W()}}function gt(i){x.value==!0&&(h.value==null?we(i.movementX,i.movementY):p.value=be(i),W())}function Ee(i){if(x.value=!1,h.value!=null){let c=h.value;c.setPose(o.selectedImage,be(i)),e.computeLandmarkPosition(o.objectPath,c.pose).then(y=>{c.setPosition(y)}),Le()}W()}function Le(){h.value=null,p.value={x:-1,y:-1}}function Te(i){let c=null;return s.landmarks.forEach(y=>{y.show&&(c=Oe(i,y)||c)}),s.distances.forEach(y=>{y.show&&y.landmarks.forEach(_=>{c=Oe(i,_)||c})}),c}function Oe(i,c){let y=c.getPose();return y&&ht(i,y.marker,Ne/o.zoom)?c:null}function ht(i,c,y){return Math.sqrt((i.x-c.x)**2+(i.y-c.y)**2)<y}function vt(i){let c=Q();return u.value?i.x>=0&&i.y>=0&&i.x<=u.value.naturalWidth/c.ratioW&&i.y<=u.value.naturalHeight/c.ratioH:!1}async function _t(i){let c=new he("Distance "+(s.distances.length+1));s.distances.push(c),c.landmarks.push(await xe(i,c.color))}async function xe(i,c=void 0){let y=s.generateID(),_=await e.computeLandmarkPosition(o.objectPath,i);return new ge(y,y,i,_,c)}async function yt(i,c){c.landmarks.push(await xe(i,c.color))}async function bt(i){s.landmarks.push(await xe(i))}function wt(i){s.distances.forEach((c,y)=>{c.landmarks=c.landmarks.filter(_=>!_.equals(i))}),s.landmarks=s.landmarks.filter(c=>!c.equals(i)),W(),Le()}return(i,c)=>(m(),S("div",{ref_key:"imageContainer",ref:d,class:O(t(C)("relative border w-full h-full flex justify-center items-center overflow-auto",l.class)),onWheel:c[1]||(c[1]=re(()=>{},["prevent"]))},[b("canvas",{ref_key:"canvas",ref:f,tabindex:"1",class:O({"cursor-none":h.value,"cursor-pointer":!h.value}),onMousedown:mt,onMouseup:Ee,onMousemove:gt,onMouseout:Ee,onWheel:pt,onContextmenu:c[0]||(c[0]=re(()=>{},["prevent"]))},null,34),b("img",{ref_key:"base_image",ref:u,class:"hidden",src:t(o).selectedImage.image,alt:"Thumbnail of "+t(o).selectedImage.name,"aspect-ratio":"auto",onLoad:k},null,40,Qa)],34))}}),je=(a,e)=>{const s=a.__vccOpts||a;for(const[o,l]of e)s[o]=l;return s},to=je(eo,[["__scopeId","data-v-75680fee"]]),so={class:"w-full h-full border flex justify-center items-center"},ao={key:0,class:"w-full h-full flex justify-center items-center"},oo={key:1,class:"w-full h-full flex justify-center items-center"},lo={class:"text-red-600"},no={key:2,class:"w-full h-full flex flex-col items-center"},ro={class:"flex grow flex-row w-full justify-start"},io=v({__name:"CameraViewer",setup(a){const e=Y(),{isPending:s,isError:o,data:l,error:d}=Ds({queryKey:["all_images"],queryFn:()=>f()}),u=ve.get(ze.type);function f(){return u.getImages(e.objectPath).then(g=>(e.stackImages=g.stackImages.map(x=>({name:x[0],label:x[1],image:u.getThumbnail(e.objectPath,x[0])})),e.size=g.size,e.individualImages=new Map,g.individualImages.forEach((x,h)=>{e.individualImages.set(h,{name:x[0],label:x[1],image:u.getThumbnail(e.objectPath,x[0])})}),g))}return(g,x)=>(m(),S("div",so,[t(s)?(m(),S("div",ao,[n(t(zs),{class:"animate-spin mr-10",width:"10%",height:"10%"})])):ae("",!0),t(o)?(m(),S("div",oo,[b("div",lo,E(t(d)),1)])):ae("",!0),t(l)?(m(),S("div",no,[b("div",ro,[n(J,{class:"border p-2"},{default:r(()=>[B(E(t(e).selectedImage.label)+" "+E(t(e).index+1)+"/"+E(t(e).stackImages.length),1)]),_:1})]),n(to,{class:"object-fit","aspect-ratio":"auto",draggable:"false"})])):ae("",!0)]))}}),uo=je(io,[["__scopeId","data-v-4d4277a8"]]),co={class:"h-screen"},fo={class:"rest_height overflow-auto sidebar rounded-md border p-4"},po={class:"rest_width rest_height flex grow items-center justify-center"},mo=v({__name:"ViewerView",setup(a){const e=ot(),s=Y();let o=new URLSearchParams(window.location.search);return console.log(o.get("series")),s.setPath(o.get("series")),(l,d)=>(m(),S("main",co,[n(ra,{class:"sticky menu top-0 flex flex-row grow z-50"}),n(t(_e)),b("div",{class:O(["h-full flex",t(e).isLeft?"flex-row":"flex-row-reverse"])},[b("div",fo,[n(t(Ya))]),b("div",po,[n(t(uo))])],2)]))}}),go=je(mo,[["__scopeId","data-v-87ca85b4"]]),ho={class:"overflow-hidden"},vo=v({__name:"App",setup(a){const e=Y();function s(o){let l=o.key;l=="ArrowUp"&&e.increment(),l=="ArrowDown"&&e.decrement()}return(o,l)=>(m(),S("div",ho,[n(go,{onKeydown:s})]))}}),ct=js();ct.use(Vs);const Ve=zt(vo);Ve.use(ct);Ve.use(Es);Ve.mount("#app");export{Po as a,$o as c,Co as g};
